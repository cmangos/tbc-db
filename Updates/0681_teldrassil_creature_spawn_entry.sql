-- Based on https://github.com/vmangos/core/commit/f81e78c8c58831459ef338c918c87fe9a1acf3e0
-- Teldrassil - creature_spawn_entry

-- https://www.wowhead.com/classic/npc=2002/rascal-sprite
-- https://www.wowhead.com/classic/npc=2003/shadow-sprite
REPLACE INTO `creature_spawn_entry` (`guid`, `entry`) SELECT `guid`, 2002 FROM `creature` WHERE `id` IN (2002,2003) AND `guid` IN (47939,47940,47941,47942,47946,47947,47949,47953,47954,47955,47956,47957,47958,47959,47960,47961,47962,47963);
REPLACE INTO `creature_spawn_entry` (`guid`, `entry`) SELECT `guid`, 2003 FROM `creature` WHERE `id` IN (2002,2003) AND `guid` IN (47939,47940,47941,47942,47946,47947,47949,47953,47954,47955,47956,47957,47958,47959,47960,47961,47962,47963);
UPDATE creature SET `id` = 0 WHERE `id` IN (2002,2003) AND `guid` IN (47939,47940,47941,47942,47946,47947,47949,47953,47954,47955,47956,47957,47958,47959,47960,47961,47962,47963);

-- https://www.wowhead.com/classic/npc=2004/dark-sprite
-- https://www.wowhead.com/classic/npc=2005/vicious-grell
REPLACE INTO `creature_spawn_entry` (`guid`, `entry`) SELECT `guid`, 2004 FROM `creature` WHERE `id` IN (2004,2005) AND `guid` IN (47964,47965,47966,47967,47968,47969,47970,47971,47972,47973,48023,48024,48025,48026,48027,48028,48029,48030,48031);
REPLACE INTO `creature_spawn_entry` (`guid`, `entry`) SELECT `guid`, 2005 FROM `creature` WHERE `id` IN (2004,2005) AND `guid` IN (47964,47965,47966,47967,47968,47969,47970,47971,47972,47973,48023,48024,48025,48026,48027,48028,48029,48030,48031);
UPDATE creature SET `id` = 0 WHERE `id` IN (2004,2005) AND `guid` IN (47964,47965,47966,47967,47968,47969,47970,47971,47972,47973,48023,48024,48025,48026,48027,48028,48029,48030,48031);

-- https://classic.wowhead.com/npc=2015/bloodfeather-harpy
-- https://classic.wowhead.com/npc=2017/bloodfeather-rogue
-- https://classic.wowhead.com/npc=2018/bloodfeather-sorceress
REPLACE INTO `creature_spawn_entry` (`guid`, `entry`) SELECT `guid`, 2015 FROM `creature` WHERE `id` IN (2015,2017,2018) AND `guid` IN (49411,49412,49417,49419,49420,49422,49423,49424,49425,49426,49427,49428,49429,49430,49431,49432,49433,49434,49435,49436,49437,49438,49439,49440,49441,49442,49443,49444,49445,49447,49448,49449,49450,49451,49452,49453);
REPLACE INTO `creature_spawn_entry` (`guid`, `entry`) SELECT `guid`, 2017 FROM `creature` WHERE `id` IN (2015,2017,2018) AND `guid` IN (49411,49412,49417,49419,49420,49422,49423,49424,49425,49426,49427,49428,49429,49430,49431,49432,49433,49434,49435,49436,49437,49438,49439,49440,49441,49442,49443,49444,49445,49447,49448,49449,49450,49451,49452,49453);
REPLACE INTO `creature_spawn_entry` (`guid`, `entry`) SELECT `guid`, 2018 FROM `creature` WHERE `id` IN (2015,2017,2018) AND `guid` IN (49411,49412,49417,49419,49420,49422,49423,49424,49425,49426,49427,49428,49429,49430,49431,49432,49433,49434,49435,49436,49437,49438,49439,49440,49441,49442,49443,49444,49445,49447,49448,49449,49450,49451,49452,49453);
UPDATE creature SET `id` = 0 WHERE `id` IN (2015,2017,2018) AND `guid` IN (49411,49412,49417,49419,49420,49422,49423,49424,49425,49426,49427,49428,49429,49430,49431,49432,49433,49434,49435,49436,49437,49438,49439,49440,49441,49442,49443,49444,49445,49447,49448,49449,49450,49451,49452,49453);

DELETE FROM `creature` WHERE `guid` = 48353; -- cleared below
INSERT INTO `creature` (`guid`, `id`, `map`, `position_x`, `position_y`, `position_z`, `orientation`, `spawntimesecsmin`, `spawntimesecsmax`, `spawndist`, `movementtype`) VALUES
(48353, 0, 1, 10497.40, 2030.05, 1331.0799, 0, 300, 300, 5, 1); -- is_spawn
REPLACE INTO `creature_spawn_entry` (`guid`, `entry`) VALUES (48353, 2015),(48353, 2017),(48353, 2018);

DELETE FROM `creature` WHERE `guid` = 48298; -- cleared below
INSERT INTO `creature` (`guid`, `id`, `map`, `position_x`, `position_y`, `position_z`, `orientation`, `spawntimesecsmin`, `spawntimesecsmax`, `spawndist`, `movementtype`) VALUES
(48298, 0, 1, 10612.50, 2119.12, 1337.1700, 0, 300, 300, 5, 1); -- is_spawn
REPLACE INTO `creature_spawn_entry` (`guid`, `entry`) VALUES (48298, 2015),(48298, 2017),(48298, 2018);

-- https://classic.wowhead.com/npc=2019/bloodfeather-fury
-- https://classic.wowhead.com/npc=2020/bloodfeather-wind-witch
-- https://classic.wowhead.com/npc=2021/bloodfeather-matriarch
REPLACE INTO `creature_spawn_entry` (`guid`, `entry`) SELECT `guid`, 2019 FROM `creature` WHERE `id` IN (2019,2020,2021) AND `guid` IN (49454,49455,49456,49457,49458,49460,49461,49462,49463,49464,49465,49466,49467,49468,49469,49470,49471,49472,49473,49474,49475,49476,49477,49478,49479,49480,49481,49482);
REPLACE INTO `creature_spawn_entry` (`guid`, `entry`) SELECT `guid`, 2020 FROM `creature` WHERE `id` IN (2019,2020,2021) AND `guid` IN (49454,49455,49456,49457,49458,49460,49461,49462,49463,49464,49465,49466,49467,49468,49469,49470,49471,49472,49473,49474,49475,49476,49477,49478,49479,49480,49481,49482);
REPLACE INTO `creature_spawn_entry` (`guid`, `entry`) SELECT `guid`, 2021 FROM `creature` WHERE `id` IN (2019,2020,2021) AND `guid` IN (49454,49455,49456,49457,49458,49460,49461,49462,49463,49464,49465,49466,49467,49468,49469,49470,49471,49472,49473,49474,49475,49476,49477,49478,49479,49480,49481,49482);
UPDATE creature SET `id` = 0 WHERE `id` IN (2019,2020,2021) AND `guid` IN (49454,49455,49456,49457,49458,49460,49461,49462,49463,49464,49465,49466,49467,49468,49469,49470,49471,49472,49473,49474,49475,49476,49477,49478,49479,49480,49481,49482);

-- https://classic.wowhead.com/npc=2009/gnarlpine-shaman
-- https://classic.wowhead.com/npc=2010/gnarlpine-defender
-- https://www.wowhead.com/classic/npc=2011/gnarlpine-augur
REPLACE INTO `creature_spawn_entry` (`guid`, `entry`) SELECT `guid`, 2009 FROM `creature` WHERE `id` IN (2009,2010,2011) AND `guid` IN (48197,48199,48200,48201,48202,48207,48208,48210,48211,48212,48213,
48214,48215,48216,48259,48266,48271,48272,48273,48449,48299,48328,48329,48330,48331,48332,48333,48344,48346,48349,48350,48351,48352,48356,48357,48368,48377,48378,48382,48426,48429,
48434,48438,48450,48452,48453,48454,48455,48456,48471,48472,48473,48475,48486,48487,48488,48490,48491,48494,48495,48498,48499,48500,48501,48503,48504,48505,48506,
48507,48508,48509,48511,48512,48513,48514,48515,48516,48517,48518,48519,48520,48521,48522,48524,48525,48526,48527,48528,48529,48530,48547,48562,48564,48636,49174,49176);
REPLACE INTO `creature_spawn_entry` (`guid`, `entry`) SELECT `guid`, 2010 FROM `creature` WHERE `id` IN (2009,2010,2011) AND `guid` IN (48197,48199,48200,48201,48202,48207,48208,48210,48211,48212,48213,
48214,48215,48216,48259,48266,48272,48273,48449,48299,48328,48329,48330,48331,48332,48333,48344,48346,48349,48350,48351,48352,48356,48357,48368,48377,48378,48382,48426,48429,
48434,48438,48450,48451,48452,48453,48454,48455,48456,48471,48472,48473,48475,48486,48487,48488,48489,48490,48491,48492,48493,48494,48495,48496,48497,48498,48499,48500,48501,48502,48503,48504,48505,48506,
48507,48508,48509,48510,48511,48512,48513,48514,48515,48516,48517,48518,48519,48520,48521,48522,48523,48524,48526,48527,48528,48529,48530,48547,48562,48564,48576,48578,48636,49171,49174,49176);
REPLACE INTO `creature_spawn_entry` (`guid`, `entry`) SELECT `guid`, 2011 FROM `creature` WHERE `id` IN (2009,2010,2011) AND `guid` IN (48271,48449,48356,48451,48494,48495,48496,48523,48525,48526,48527,48528,
48529,48530,48547,48561,48562,48564,48576,48578,48636,49021,49148,49160,49165,49166,49170,49171,49172,49173,49174,49175,49176,48421);
UPDATE creature SET `id` = 0 WHERE `id` IN (2009,2010,2011) AND `guid` IN (48197,48199,48200,48201,48202,48207,48208,48210,48211,48212,48213,48214,48215,48216,48259,48266,48271,48272,48273,48449,
48299,48328,48329,48330,48331,48332,48333,48344,48346,48349,48350,48351,48352,48356,48357,48368,48377,48378,48382,48421,48426,48429,48434,48438,48450,48451,48452,48453,48454,48455,48456,48471,
48472,48473,48475,48486,48487,48488,48489,48490,48491,48492,48493,48494,48495,48496,48497,48498,48499,48500,48501,48502,48503,48504,48505,48506,48507,48508,48509,48510,48511,48512,48513,48514,48515,
48516,48517,48518,48519,48520,48521,48522,48523,48524,48525,48526,48527,48528,48529,48530,48547,48561,48562,48564,48576,48578,48636,49021,49148,49160,49165,49166,49170,49171,49172,49173,49174,
49175,49176);
UPDATE `creature` SET `position_x` = 9812.76, `position_y` = 1491.19, `position_z` = 1257.8699, `orientation` = 0, `spawndist` = 3, `MovementType` = 1 WHERE `guid` = 48350; -- can be moved
UPDATE `creature` SET `position_x` = 9836.09, `position_y` = 1542.79, `position_z` = 1259.1199, `orientation` = 0, `spawndist` = 3, `MovementType` = 1 WHERE `guid` = 48421; -- can be moved
DELETE FROM `creature` WHERE `guid` IN (
48353, -- reuse for this, missing pats
48298, -- reuse for this, missing pats
49168, -- reuse for this, missing pats
49169); -- reuse for this, missing pats

-- https://classic.wowhead.com/npc=2012/gnarlpine-pathfinder
-- https://classic.wowhead.com/npc=2013/gnarlpine-avenger
-- https://www.wowhead.com/classic/npc=2014/gnarlpine-totemic
REPLACE INTO `creature_spawn_entry` (`guid`, `entry`) SELECT `guid`, 2012 FROM `creature` WHERE `id` IN (2012,2013,2014) AND `guid` IN (49177,49178,49179,49180,49181,49182,49184,49205,49206,49207,49208,49209,49210,49211,49212,49213,49215,49216,49217,49264,49265,49266,49267,49404,49405,49406,49407,49408,49409,49410);
REPLACE INTO `creature_spawn_entry` (`guid`, `entry`) SELECT `guid`, 2013 FROM `creature` WHERE `id` IN (2012,2013,2014) AND `guid` IN (49177,49178,49179,49180,49181,49182,49184,49205,49206,49207,49208,49209,49210,49211,49212,49213,49215,49216,49217,49264,49265,49266,49267,49404,49405,49406,49407,49408,49409,49410);
REPLACE INTO `creature_spawn_entry` (`guid`, `entry`) SELECT `guid`, 2014 FROM `creature` WHERE `id` IN (2012,2013,2014) AND `guid` IN (49181,49182,49207,49210,49213,49215,49406,49407,49408,49409,49410);
UPDATE creature SET `id` = 0 WHERE `id` IN (2012,2013,2014) AND `guid` IN (49177,49178,49179,49180,49181,49182,49184,49205,49206,49207,49208,49209,49210,49211,49212,49213,49215,49216,49217,49264,49265,49266,49267,49404,49405,49406,49407,49408,49409,49410);

-- https://www.wowhead.com/classic/npc=2008/gnarlpine-warrior
-- https://www.wowhead.com/classic/npc=7235/gnarlpine-mystic
REPLACE INTO `creature_spawn_entry` (`guid`, `entry`) SELECT `guid`, 2008 FROM `creature` WHERE `id` IN (2008,7235) AND `guid` IN (46306,46307,46310,46311,46315,46316,46317,46318,48061,48062,48063,48064,48065,48069,48070,48071,48072,48073,48074,48075,48076,48078,48079,48080,48081,48082,48083,48084,48085,48086,48087,48088,48089,48157,48163,48164,48175,48185);
REPLACE INTO `creature_spawn_entry` (`guid`, `entry`) SELECT `guid`, 7235 FROM `creature` WHERE `id` IN (2008,7235) AND `guid` IN (46306,46307,46310,46311,46314,46315,46316,46317,46318,48061,48062,48063,48064,48065,48081,48083,48084);
UPDATE creature SET `id` = 0 WHERE `id` IN (2008,7235) AND `guid` IN (46306,46307,46310,46311,46314,46315,46316,46317,46318,48061,48062,48063,48064,48065,48069,48070,48071,48072,48073,48074,48075,48076,48078,48079,48080,48081,48082,48083,48084,48085,48086,48087,48088,48089,48157,48163,48164,48175,48185);

-- https://www.wowhead.com/classic/npc=2006/gnarlpine-ursa
-- https://www.wowhead.com/classic/npc=2007/gnarlpine-gardener
-- https://www.wowhead.com/classic/npc=2008/gnarlpine-warrior
REPLACE INTO `creature_spawn_entry` (`guid`, `entry`) SELECT `guid`, 2006 FROM `creature` WHERE `id` IN (2006,2007,2008) AND `guid` IN (48032,48033,48035,48041,48042,48043,48044,48045,48046,48047,48048,48049,48050,48051,48052,48053,48054,48055,48056,48057,48058,48059,48060,48066,48067,48068,48077);
REPLACE INTO `creature_spawn_entry` (`guid`, `entry`) SELECT `guid`, 2007 FROM `creature` WHERE `id` IN (2006,2007,2008) AND `guid` IN (48032,48033,48035,48041,48042,48043,48044,48045,48046,48047,48048,48049,48050,48051,48052,48053,48054,48055,48056,48057,48058,48059,48060,48066,48067,48068,48077);
REPLACE INTO `creature_spawn_entry` (`guid`, `entry`) SELECT `guid`, 2008 FROM `creature` WHERE `id` IN (2006,2007,2008) AND `guid` IN (48033,48066,48067,48068,48077);
UPDATE creature SET `id` = 0 WHERE `id` IN (2006,2007,2008) AND `guid` IN (48032,48033,48035,48041,48042,48043,48044,48045,48046,48047,48048,48049,48050,48051,48052,48053,48054,48055,48056,48057,48058,48059,48060,48066,48067,48068,48077);

-- CREATURE_EXTRA_FLAG_DYNGUID
UPDATE `creature_template` SET `ExtraFlags` = `ExtraFlags`|1048576 WHERE `entry` IN (2002,2003,2004,2005,2015,2017,2018,2019,2020,2021,2009,2010,2011,2012,2013,2014,2008,7235,2006,2007,2008);
-- Darkshore
UPDATE `creature_template` SET `ExtraFlags` = `ExtraFlags`|1048576 WHERE `entry` IN (2207,2208,2205,2206,2204,2205,2203,2204,2202,2203,2201,2202,2179,2180,2338,2339,2156,2157);
-- STV
UPDATE `creature_template` SET `ExtraFlags` = `ExtraFlags`|1048576 WHERE `entry` IN (597,660,671,587,694,697,4457,4458,4459,4460,4461,1142,1144,937,940,1488,1489,1490,1491,1565,1653,4505,4506,1563,1564,1561,1562,675,676,677,681,682,683,736,943,976,977,678,679,710,680);
-- Remaining npcs with creature_spawn_entry; -- if this causes performance issues can be removed again.
UPDATE `creature_template` SET `ExtraFlags` = `ExtraFlags`|1048576 WHERE `entry` IN (46,95,97,98,121,125,422,429,431,432,433,434,435,436,437,440,453,478,485,504,544,545,548,568,578,594,615,619,634,657,667,669,670,672,674,684,696,732,772,780,781,782,783,883,890,1420,1506,1507,1537,1538,1706,1707,1708,1711,1715,1725,1726,1729,1732,1806,1808,1812,1813,1816,1817,1821,1824,2241,2242,2319,2405,2914,2968,2972,2973,2974,3235,3236,3237,3284,3285,3300,3376,3377,3636,3637,3864,3865,4036,4044,4064,4065,4075,4113,4114,4116,4131,4133,4249,4280,4281,4282,4284,4285,4417,4418,4427,4435,4436,4437,4440,4442,4462,4463,4464,4511,4512,4514,4515,4516,4517,4518,4519,4520,4522,4523,4525,4530,4531,4532,4538,4539,4541,4548,4623,4809,4810,4811,4812,4850,4852,4853,4855,4863,4953,5056,5226,5228,5243,5256,5259,5261,5263,5267,5269,5270,5291,5357,5358,5648,5649,5650,5756,5844,5846,5850,5852,5855,5860,5861,5862,6035,6073,6115,6206,6211,6218,6219,6220,6226,6227,6232,6234,6329,6391,6392,6407,6488,6489,6490,6513,6514,6516,6653,7022,7025,7026,7027,7028,7029,7135,7136,7246,7247,7320,7321,7327,7332,7725,7726,8336,8384,8544,8545,8546,8547,8550,8551,8553,8555,8556,8558,8898,8899,9878,9879,10384,10385,10408,10409,10418,10419,10420,10421,10422,10423,10424,10425,10426,10481,10495,10986,11043,11102,11350,11371,11372,11441,11444,11445,11450,11462,11464,11665,11668,11675,11686,11687,11697,11737,11745,11747,11827,11828,11830,13036,13196,13197,13285,13321,14285,14881,15184,15196,15236,15246,15249,15250,15325,15327,15476,15641,15642,15643,15645,15647,15648,15654,15655,15656,15657,15658,15668,15669,15670,15950,15966,15967,16018,16029,16030,16068,16156,16157,16158,16162,16523,16580,16582,16593,16594,16599,16831,16842,16864,16865,16866,17136,17137,17193,17194,17195,17420,17694,17819,17820,17833,17860,18086,18087,18088,18089,18119,18493,18495,18497,18631,18633,18635,18637,18638,18641,18642,18663,18869,18870,19413,19415,19732,20426,20428,20429,20430,21224,21225,21226,21227,21228,21846,21859,23030,23330,23542,23581,23582,23596,23597,24059,24065,24683,24684,24685,24686,24687,24688,24689,24690,24696,24818,24819,24830,24938,25115,25367,25369,25370,25371,25509,25591,25597,25863,25866,26222,26223,1364,4851,6071,6072,8566,8889,8890,588,595,701,16194,16215,16216,17728,17729,17771,18136,18137,26635,26636,26716,26722,26795,26797,26811,26812,27283,27286,27315,27336,27823,27824,29411,29412,29437,29438,29449,29450,29451,29654,29697,29719,29720,29722,29880,29890,29891,29892,30102,30186,30193,30194,30195,30196,30204,30205,30243,30273,30333,30632,30703,30863,30864,30865,31258,31262,31267,31310,31313,31328,31330,34907,34947,38493,38505);

